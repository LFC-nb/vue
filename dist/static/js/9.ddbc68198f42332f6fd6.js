webpackJsonp([9],{I654:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),l=a.n(r),s=a("Xxa5"),o=a.n(s),i=a("exGp"),n=a.n(i),c=a("n68v"),m=a("pTQH"),d={components:{Card:c.a},data:function(){return{dialogImageUrl:"",dialogVisible:!1,baseImgUrl:"http://127.0.0.1:5000/upload/shop/",uploadUrl:"http://127.0.0.1:5000/shop/upload",disabled:!0,form:{name:"",bulletin:"",avatar:"",pics:[],deliveryPrice:"",deliveryTime:"",description:"",score:"",sellCount:"",supports:[],date:[]}}},methods:{getShop:function(){var e=this;return n()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/shop/info");case 2:(a=t.sent).data.avatar=e.baseImgUrl+a.data.avatar,a.data.pics=a.data.pics.map(function(t){return{url:e.baseImgUrl+t}}),e.form=a.data;case 6:case"end":return t.stop()}},t,e)}))()},save:function(){var e=this;return n()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.disabled=!e.disabled,!e.disabled){t.next=5;break}return a=e.form.pics.map(function(t){return t.url.substr(e.baseImgUrl.length)}),t.next=5,r={id:e.form.id,name:e.form.name,bulletin:e.form.bulletin,avatar:e.form.avatar.substr(e.baseImgUrl.length),deliveryPrice:e.form.deliveryPrice,deliveryTime:e.form.deliveryTime,description:e.form.description,score:e.form.score,sellCount:e.form.sellCount,supports:l()(e.form.supports),date:l()(e.form.date),pics:l()(a)},m.a.post("/shop/edit",r);case 5:case"end":return t.stop()}var r},t,e)}))()},handleRemove:function(e,t){this.form.pics=t},handleAvatarSuccess:function(e){var t=e.code,a=e.msg,r=e.imgUrl;0===t&&this.$message({type:"success",message:a}),this.form.avatar=this.baseImgUrl+r},handlePictureCardPreview:function(){this.dialogVisible=!0,this.dialogImageUrl=file.url},handleImgSuccess:function(e){var t=e.code,a=e.msg,r=e.imgUrl;console.log(e),0===t&&this.$message({type:"success",message:a}),this.form.pics.push({url:this.baseImgUrl+r})}},created:function(){this.getShop()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"store"},[a("Card",[a("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[e._v("\n      店铺管理\n      "),a("el-button",{attrs:{type:e.disabled?"primary":"success"},on:{click:e.save}},[e._v(e._s(e.disabled?"编辑":"保存"))])],1),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("el-form",{ref:"form",attrs:{disabled:e.disabled,model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"店铺名称"}},[a("el-input",{attrs:{placeholder:"有手就行(山城重庆)",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺公告"}},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入内容"},model:{value:e.form.bulletin,callback:function(t){e.$set(e.form,"bulletin",t)},expression:"form.bulletin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺头像"}},[a("el-upload",{attrs:{action:e.uploadUrl,"show-file-list":!1,"on-preview":e.handlePictureCardPreview,"on-success":e.handleAvatarSuccess}},[e.form.avatar?a("img",{staticClass:"avatar",attrs:{width:"50%",src:e.form.avatar}}):e._e()])],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺图片"}},[a("el-upload",{attrs:{action:e.uploadUrl,"file-list":e.form.pics,"list-type":"picture-card","on-remove":e.handleRemove,"on-preview":e.handlePictureCardPreview,"on-success":e.handleImgSuccess}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),a("el-form-item",{attrs:{label:"配送费"}},[a("el-input",{model:{value:e.form.deliveryPrice,callback:function(t){e.$set(e.form,"deliveryPrice",t)},expression:"form.deliveryPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配送时间"}},[a("el-input",{model:{value:e.form.deliveryTime,callback:function(t){e.$set(e.form,"deliveryTime",t)},expression:"form.deliveryTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配送描述"}},[a("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺评分"}},[a("el-input",{model:{value:e.form.score,callback:function(t){e.$set(e.form,"score",t)},expression:"form.score"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销量"}},[a("el-input",{model:{value:e.form.sellCount,callback:function(t){e.$set(e.form,"sellCount",t)},expression:"form.sellCount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动"}},[a("el-checkbox-group",{model:{value:e.form.supports,callback:function(t){e.$set(e.form,"supports",t)},expression:"form.supports"}},[a("el-checkbox",{attrs:{label:"在线支付满28减5",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"VC无限橙果汁全程8折",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"单人精彩套餐",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"特价饮品8折抢购",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"单人特色套餐",name:"type"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"营业时间"}},[a("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)],1)],1)])],1)},staticRenderFns:[]};var f=a("VU/8")(d,u,!1,function(e){a("iwaN")},"data-v-5619f738",null);t.default=f.exports},iwaN:function(e,t){}});
//# sourceMappingURL=9.ddbc68198f42332f6fd6.js.map